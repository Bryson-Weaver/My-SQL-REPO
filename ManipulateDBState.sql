ALTER TABLE PRODUCTLIST
ADD (PRICE NUMBER(6,2),
DESCRIPTION VARCHAR(250));

UPDATE PRODUCTLIST
SET (PRODUCTLIST.PRICE , PRODUCTLIST.DESCRIPTION) = (SELECT STOREFRONT.PRICE, STOREFRONT.DESCRIPTION
FROM STOREFRONT
WHERE PRODUCTLIST.PRODUCTCODE = STOREFRONT.PRODUCTCODE)

DROP TABLE STOREFRONT;

CREATE TABLE CHATLOG (
    CHATID NUMBER(3),
    RECIEVERID NUMBER(3),
    SENDERID NUMBER(3),
    DATESENT DATE,
    CONTENT VARCHAR2(250),
    CONSTRAINT PK_CHATLOG PRIMARY KEY (CHATID),
    CONSTRAINT FK_CHATLOG_RECIEVER FOREIGN KEY (RECIEVERID) REFERENCES USERBASE (USERID),
    CONSTRAINT FK_CHATLOG_SENDER FOREIGN KEY (SENDERID) REFERENCES USERBASE (USERID)
);
INSERT INTO CHATLOG (CHATID, RECIEVERID, SENDERID, DATESENT, CONTENT)
VALUES (1, 102, 101, SYSDATE, 'HEY, HOW ARE YOU?');

INSERT INTO CHATLOG (CHATID, RECIEVERID, SENDERID, DATESENT, CONTENT)
VALUES (2, 104, 103, SYSDATE, 'DID YOU GET THE NOTES FROM CLASS?');

INSERT INTO CHATLOG (CHATID, RECIEVERID, SENDERID, DATESENT, CONTENT)
VALUES (3, 106, 105, SYSDATE, 'ARE WE STILL MEETING TOMORROW?');

INSERT INTO CHATLOG (CHATID, RECIEVERID, SENDERID, DATESENT, CONTENT)
VALUES (4, 108, 107, SYSDATE, 'I JUST SENT YOU THE FILE.');

INSERT INTO CHATLOG (CHATID, RECIEVERID, SENDERID, DATESENT, CONTENT)
VALUES (5, 110, 109, SYSDATE, 'HAPPY BIRTHDAY!');

INSERT INTO CHATLOG (CHATID, RECIEVERID, SENDERID, DATESENT, CONTENT)
VALUES (6, 112, 111, SYSDATE, 'DON''T FORGET ABOUT THE QUIZ.');

INSERT INTO CHATLOG (CHATID, RECIEVERID, SENDERID, DATESENT, CONTENT)
VALUES (7, 114, 113, SYSDATE, 'THANKS FOR YOUR HELP EARLIER.');

INSERT INTO CHATLOG (CHATID, RECIEVERID, SENDERID, DATESENT, CONTENT)
VALUES (8, 115, 101, SYSDATE, 'SEE YOU IN THE LIBRARY LATER.');

INSERT INTO CHATLOG (CHATID, RECIEVERID, SENDERID, DATESENT, CONTENT)
VALUES (9, 103, 102, SYSDATE, 'CAN YOU REVIEW MY DRAFT?');

INSERT INTO CHATLOG (CHATID, RECIEVERID, SENDERID, DATESENT, CONTENT)
VALUES (10, 105, 104, SYSDATE, 'LUNCH AT 12?');

CREATE TABLE FRIENDSLIST (
USERID NUMBER(3),
FRIENDID NUMBER(3),
CONSTRAINT PK_FRIENDSLIST PRIMARY KEY (USERID, FRIENDID),
CONSTRAINT PK_FRIENDSLIST_USER FOREIGN KEY (USERID) REFERENCES USERBASE (USERID),
CONSTRAINT PK_FRIENDSLIST_FRIEND FOREIGN KEY (FRIENDID) REFERENCES USERBASE (USERID)
);

INSERT INTO FRIENDSLIST VALUES (101, 102);
INSERT INTO FRIENDSLIST VALUES (102, 103);
INSERT INTO FRIENDSLIST VALUES (103, 104);
INSERT INTO FRIENDSLIST VALUES (104, 105);
INSERT INTO FRIENDSLIST VALUES (105, 106);
INSERT INTO FRIENDSLIST VALUES (106, 107);
INSERT INTO FRIENDSLIST VALUES (107, 108);
INSERT INTO FRIENDSLIST VALUES (108, 109);
INSERT INTO FRIENDSLIST VALUES (109, 101);
INSERT INTO FRIENDSLIST VALUES (110, 102);

CREATE TABLE WISHLIST (
    USERID NUMBER(3),
    PRODUCTCODE VARCHAR2(5),
    POSITION NUMBER(3),
    CONSTRAINT PK_WISHLIST PRIMARY KEY (USERID, PRODUCTCODE),
    CONSTRAINT FK_WISHLIST_USER FOREIGN KEY (USERID) REFERENCES USERBASE (USERID),
    CONSTRAINT FK_WISHLIST_PRODUCT FOREIGN KEY (PRODUCTCODE) REFERENCES PRODUCTLIST (PRODUCTCODE)
);

INSERT INTO WISHLIST VALUES (101, 'GAME1', 1);
INSERT INTO WISHLIST VALUES (101, 'GAME2', 2);
INSERT INTO WISHLIST VALUES (101, 'GAME3', 3);
INSERT INTO WISHLIST VALUES (102, 'GAME4', 1);
INSERT INTO WISHLIST VALUES (102, 'GAME5', 2);
INSERT INTO WISHLIST VALUES (103, 'GAME6', 1);
INSERT INTO WISHLIST VALUES (103, 'GAME7', 2);
INSERT INTO WISHLIST VALUES (104, 'GAME8', 1);
INSERT INTO WISHLIST VALUES (104, 'GAME9', 2);
INSERT INTO WISHLIST VALUES (105, 'RPG10', 1);

CREATE TABLE USERPROFILE (
    USERID NUMBER(3),
    IMAGEFILE VARCHAR2(250),
    DESCRIPTION VARCHAR2(250),
    CONSTRAINT PK_USERPROFILE PRIMARY KEY (USERID),
    CONSTRAINT FK_USERPROFILE_USER FOREIGN KEY (USERID) REFERENCES USERBASE (USERID)
)
INSERT INTO USERPROFILE VALUES (101, 'profile1.jpg', 'GAMER AND STUDENT');
INSERT INTO USERPROFILE VALUES (102, 'profile2.jpg', 'LOVES RPGS');
INSERT INTO USERPROFILE VALUES (103, 'profile3.jpg', 'STRATEGY GAME FANATIC');
INSERT INTO USERPROFILE VALUES (104, 'profile4.jpg', 'CASUAL GAMER');
INSERT INTO USERPROFILE VALUES (105, 'profile5.jpg', 'MULTIPLAYER ENTHUSIAST');
INSERT INTO USERPROFILE VALUES (106, 'profile6.jpg', 'INDIE GAME LOVER');
INSERT INTO USERPROFILE VALUES (107, 'profile7.jpg', 'E-SPORTS PLAYER');
INSERT INTO USERPROFILE VALUES (108, 'profile8.jpg', 'GAME DEVELOPER');
INSERT INTO USERPROFILE VALUES (109, 'profile9.jpg', 'STREAMER');
INSERT INTO USERPROFILE VALUES (110, 'profile10.jpg', 'GAME COLLECTOR');

CREATE TABLE SECURITYQUESTION (
    QUESTIONID NUMBER(3),
    USERID NUMBER(3),
    QUESTION VARCHAR2(250),
    ANSWER VARCHAR2(250),
    CONSTRAINT PK_SECURITYQUESTION PRIMARY KEY (QUESTIONID),
    CONSTRAINT FK_SECURITYQUESTION_USER FOREIGN KEY (USERID) REFERENCES USERBASE (USERID),
)
INSERT INTO SECURITYQUESTION VALUES (1, 101, 'WHAT IS YOUR FAVORITE COLOR?', 'BLUE');
INSERT INTO SECURITYQUESTION VALUES (2, 102, 'WHAT IS YOUR MOTHER''S MAIDEN NAME?', 'SMITH');
INSERT INTO SECURITYQUESTION VALUES (3, 103, 'WHAT WAS THE NAME OF YOUR FIRST PET?', 'FLUFFY');
INSERT INTO SECURITYQUESTION VALUES (4, 104, 'WHAT CITY WERE YOU BORN IN?', 'NEW YORK');
INSERT INTO SECURITYQUESTION VALUES (5, 105, 'WHAT IS YOUR FAVORITE FOOD?', 'PIZZA');
INSERT INTO SECURITYQUESTION VALUES (6, 106, 'WHAT WAS THE MAKE OF YOUR FIRST CAR?', 'TOYOTA');
INSERT INTO SECURITYQUESTION VALUES (7, 107, 'WHAT IS YOUR FAVORITE MOVIE?', 'INCEPTION');
INSERT INTO SECURITYQUESTION VALUES (8, 108, 'WHAT IS YOUR DREAM JOB?', 'GAME DEVELOPER');
INSERT INTO SECURITYQUESTION VALUES (9, 109, 'WHAT IS YOUR FAVORITE BOOK?', '1984');
INSERT INTO SECURITYQUESTION VALUES (10, 110, 'WHAT IS YOUR FAVORITE HOBBY?', 'GAMING');

CREATE TABLE COMMUNITYRULES (
    RULENUM NUMBER(3),
    TITLE VARCHAR2(250),
    DESCRIPTION VARCHAR2(250),
    SEVERITYPOINT NUMBER(4)
    CONSTRAINT PK_COMMUNITYRULES PRIMARY KEY (RULENUM)
)
INSERT INTO COMMUNITYRULES VALUES (1, 'NO HATE SPEECH', 'ANY FORM OF HATE SPEECH WILL NOT BE TOLERATED.', 10);
INSERT INTO COMMUNITYRULES VALUES (2, 'NO SPAMMING', 'SPAMMING IS PROHIBITED.', 5);
INSERT INTO COMMUNITYRULES VALUES (3, 'NO HARASSMENT', 'HARASSMENT OF ANY KIND WILL NOT BE TOLERATED.', 15);
INSERT INTO COMMUNITYRULES VALUES (4, 'RESPECT OTHERS', 'ALWAYS BE RESPECTFUL TO OTHER MEMBERS.', 5);
INSERT INTO COMMUNITYRULES VALUES (5, 'NO ILLEGAL CONTENT', 'POSTING ILLEGAL CONTENT IS STRICTLY PROHIBITED.', 20);
INSERT INTO COMMUNITYRULES VALUES (6, 'NO IMPERSONATION', 'DO NOT IMPERSONATE OTHER MEMBERS OR STAFF.', 10);
INSERT INTO COMMUNITYRULES VALUES (7, 'FOLLOW MODERATOR INSTRUCTIONS', 'ALWAYS FOLLOW THE INSTRUCTIONS OF MODERATORS.', 5);
INSERT INTO COMMUNITYRULES VALUES (8, 'NO ADVERTISING', 'ADVERTISING WITHOUT PERMISSION IS NOT ALLOWED.', 10);
INSERT INTO COMMUNITYRULES VALUES (9, 'KEEP CONTENT APPROPRIATE', 'ALL CONTENT MUST BE APPROPRIATE FOR ALL AGES.', 15);
INSERT INTO COMMUNITYRULES VALUES (10, 'REPORT VIOLATIONS', 'REPORT ANY VIOLATIONS TO MODERATORS.', 5);

CREATE TABLE INFRACTIONS (
    INFRACTIONID NUMBER(3),
    USERID NUMBER(3),
    RULENUM NUMBER(3),
    DATEASSIGNED DATE,
    PENALTY VARCHAR2(250),
    CONSTRAINT PK_INFRACTIONS PRIMARY KEY (INFRACTIONID),
    CONSTRAINT FK_INFRACTIONS_USER FOREIGN KEY (USERID) REFERENCES USERBASE (USERID),
    CONSTRAINT FK_INFRACTIONS_RULE FOREIGN KEY (RULENUM) REFERENCES COMMUNITYRULES (RULENUM)
);
INSERT INTO INFRACTIONS VALUES (1, 101, 1, SYSDATE, 'WARNING');
INSERT INTO INFRACTIONS VALUES (2, 102, 2, SYSDATE, 'MUTED FOR 1 DAY');
INSERT INTO INFRACTIONS VALUES (3, 103, 3, SYSDATE, 'BANNED FOR 3 DAYS');
INSERT INTO INFRACTIONS VALUES (4, 104, 4, SYSDATE, 'WARNING');
INSERT INTO INFRACTIONS VALUES (5, 105, 5, SYSDATE, 'BANNED FOR 7 DAYS');
INSERT INTO INFRACTIONS VALUES (6, 106, 6, SYSDATE, 'MUTED FOR 3 DAYS');
INSERT INTO INFRACTIONS VALUES (7, 107, 7, SYSDATE, 'WARNING');
INSERT INTO INFRACTIONS VALUES (8, 108, 8, SYSDATE, 'BANNED FOR 1 DAY');
INSERT INTO INFRACTIONS VALUES (9, 109, 9, SYSDATE, 'MUTED FOR 1 DAY');
INSERT INTO INFRACTIONS VALUES (10, 110, 10, SYSDATE, 'WARNING');

CREATE TABLE USERSUPPORT (
    TICKETID NUMBER,
    EMAIL VARCHAR2(250),
    ISSUE  VARCHAR2(250),
    DATESUBMITTED DATE,
    DATEUPDATED DATE,
    STATUS VARCHAR2(250),
    CONSTRAINT PK_USERSUPPORT PRIMARY KEY (TICKETID)
);
INSERT INTO USERSUPPORT VALUES (1, 'brysonsemail@email.com', 'I CANT LOG IN TO MY ACCOUNT.', SYSDATE, SYSDATE, 'OPEN');
INSERT INTO USERSUPPORT VALUES (2, 'randomemail@super.com', 'I DIDNT RECEIVE MY ORDER.', SYSDATE, SYSDATE, 'IN PROGRESS');
INSERT INTO USERSUPPORT VALUES (3, 'gamesaresocool@videogame.com', 'I WANT A REFUND.', SYSDATE, SYSDATE, 'CLOSED');
INSERT INTO USERSUPPORT VALUES (4, 'emailsux@textme.com', 'I CANT UPDATE MY PROFILE.', SYSDATE, SYSDATE, 'OPEN');
INSERT INTO USERSUPPORT VALUES (5, 'imonlydoingfivevaluesnow@wishiknewthisyesterday.com', 'I HAVE A SUGGESTION.', SYSDATE, SYSDATE, 'IN PROGRESS');
INSERT INTO USERSUPPORT VALUES (6, 'newemailaddress@yahoo.com', 'I CANT CHANGE MY PASSWORD.', SYSDATE, SYSDATE, 'NEW');
INSERT INTO USERSUPPORT VALUES (7, 'UNIQUEEMAIL@yahoo.com', 'I NEED HELP WITH MY ORDER.', SYSDATE, SYSDATE, 'NEW');

CREATE VIEW UNIQUESECURITYQUESTIONS AS
SELECT DISTINCT QUESTION
FROM SECURITYQUESTION;

CREATE VIEW NEWANDINCOMPLETETICKETS AS
SELECT TICKETID, EMAIL, ISSUE, DATEUPDATED
FROM USERSUPPORT
WHERE STATUS.UPPER = 'NEW' OR STATUS.UPPER = 'IN PROGRESS';
ORDER BY DATEUPDATED ASC; 